(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){},331:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(54),c=a.n(o),l=(a(98),a(2)),i=a(3),s=a(5),u=a(4),h=a(6),m=(a(51),a(10)),d=a(338),p=a(337),b=a(336),f=a(85),v=a(332),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"getCookie",value:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}},{key:"checkCookie",value:function(){var e=this.getCookie("userid");return!(""===e||-1===e)}},{key:"render",value:function(){var e;return e=this.checkCookie()?r.a.createElement(d.a.Link,{href:"/mypage"},localStorage.getItem("name")):r.a.createElement(d.a.Link,{href:"/user/login"},"\u767b\u5f55"),r.a.createElement("div",{className:"Navigator"},r.a.createElement(p.a,{bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(p.a.Brand,{href:"/home"}," RBooks"),r.a.createElement(d.a.Link,{href:"/settings"},"\u8bbe\u7f6e"),r.a.createElement(d.a.Link,{href:"/message"}," \u6d88\u606f"),r.a.createElement(d.a.Link,{href:"/write"}," \u5199\u4e66"),e),r.a.createElement(b.a,{inline:!0},r.a.createElement(f.a,{type:"text",placeholder:"Search",className:"mr-sm-4"}),r.a.createElement(v.a,{variant:"outline-light"},"Search")))))}}]),t}(n.Component),O=a(32),j=a(335),E=a(13),k=a.n(E),y=function(e,t){return function(a){function n(){var e;return Object(l.a)(this,n),(e=Object(s.a)(this,Object(u.a)(n).call(this))).state={data:""},e}return Object(h.a)(n,a),Object(i.a)(n,[{key:"componentWillMount",value:function(){var e=this;k.a.get("http://localhost:8080/"+t).then(function(t){e.setState({data:t.data})}).catch(function(t){e.setState({data:"\u52a0\u8f7d\u9519\u8bef"})})}},{key:"render",value:function(){return r.a.createElement(e,{data:this.state.data})}}]),n}(n.Component)},C=a(23),S=a(60),w=a.n(S),N=(a(24),a(41),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.data,t="";if("number"===typeof e){var a=new Date(e);t=a.getFullYear()+"-"+a.getMonth()+"1-"+a.getDay()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}if("string"===typeof e&&-1!==e.indexOf("T")){var n=e.split("T"),o=n[1].split(".");t=n[0]+" "+o[0]}return r.a.createElement("span",null,t)}}]),t}(n.Component)),I=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e={author:this.props.data.author,bookid:this.props.data.id},t={description:this.props.data.description};e=JSON.stringify(e);var a="/read/".concat(e);return r.a.createElement("div",{className:"BookItem"},r.a.createElement(w.a,{variant:"light",action:!0},r.a.createElement("div",{className:"BookInfo"},r.a.createElement("span",null,"\u4e66\u7c4d\u7f16\u53f7\uff1a"),this.props.data.id,r.a.createElement("br",null),r.a.createElement(C.b,{to:{pathname:"".concat(a),state:{des:t}}},this.props.data.name),r.a.createElement("div",{className:"Author"},this.props.data.author,r.a.createElement("span",null," \u7f16\u8457")),r.a.createElement("br",null),r.a.createElement("span",null,"\u66f4\u65b0\u65f6\u95f4\uff1a")," ",r.a.createElement(N,{data:this.props.data.datetime}),r.a.createElement("div",{className:"Love"},r.a.createElement("span",null,"\u70b9\u8d5e\uff1a")," ",this.props.data.love))))}}]),t}(n.Component),L=a(88),x=a.n(L),_=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"data",value:function(){var e=this.props.data,t=[];for(var a in e){var n;n={id:e[a].id,name:e[a].name,author:e[a].author,description:e[a].description,datetime:e[a].datetime,photourl:e[a].photourl,love:e[a].love},t.push(n)}return t}},{key:"render",value:function(){return r.a.createElement(x.a,null,this.data().map(function(e,t){return r.a.createElement(I,{key:t,data:e})}))}}]),t}(n.Component),D=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(_,{data:this.props.data})}}]),t}(n.Component),M=D=y(D,"home"),T=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(M,null))}}]),t}(n.Component),A=function(e){return function(t){function a(){return Object(l.a)(this,a),Object(s.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(h.a)(a,t),Object(i.a)(a,[{key:"getCookie",value:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}},{key:"checkCookie",value:function(){var e=this.getCookie("userid");return!(null===e||-1===e)}},{key:"render",value:function(){return this.checkCookie()?r.a.createElement(e,null):r.a.createElement("div",null,"\u4f60\u8fd8\u6ca1\u6709\u767b\u5f55\uff0c\u8bf7\u5148\u767b\u5f55\uff01")}}]),a}(n.Component)},F=a(35),B=a.n(F),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={bookname:"",description:"",booklist:""},a.handleNameChange=a.handleNameChange.bind(Object(m.a)(Object(m.a)(a))),a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;k.a.get("http://localhost:8080/write/getwrite?author=".concat(localStorage.getItem("name"))).then(function(t){e.setState({booklist:t.data})}).catch(function(e){alert(e.data)})}},{key:"handleNameChange",value:function(e){this.setState({bookname:e.target.value})}},{key:"handleChange",value:function(e){this.setState({description:e.target.value})}},{key:"handleSubmit",value:function(){var e={name:this.state.bookname,author:localStorage.getItem("name"),description:this.state.description,datetime:new Date};k.a.post("http://localhost:8080/write/addbook",e).then(function(e){-1!==e.data&&alert("\u6dfb\u52a0\u6210\u529f")}).catch(function(e){alert(e.data)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"newbook"},"\u5f00\u59cb\u4e00\u672c\u65b0\u4e66:",r.a.createElement("br",null),r.a.createElement(b.a.Label,null,"\u4e66\u540d\uff1a"),r.a.createElement(b.a.Control,{type:"text",onChange:this.handleNameChange,value:this.state.bookname,name:"bookname"}),r.a.createElement(b.a.Label,null,"\u4e66\u672c\u4ecb\u7ecd\uff1a"),r.a.createElement("br",null),r.a.createElement("textarea",{className:"textarea",onChange:this.handleChange,value:this.state.description,name:"bookname",placeholder:"\u5173\u4e8e\u672c\u4e66\u4f60\u60f3\u8bf4\u4e9b\u5565\u5462\uff1f"}),r.a.createElement("br",null),r.a.createElement(B.a,{variant:"success",onClick:this.handleSubmit},"\u4fdd\u5b58")),r.a.createElement("div",{className:"nav-booklist"},r.a.createElement(_,{data:this.state.booklist})))}}]),t}(n.Component),P=J=A(J),W=(a(37),a(89)),U=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"_getProcessedContent",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&$quot;").replace(/'/g,"&#039;").replace(/`([\S\s]+?)`/g,"<code></code>")}},{key:"render",value:function(){var e=this.props.data,t=e.commentid.datetime;return r.a.createElement(W.a,{action:!0,variant:"light"},r.a.createElement("div",{className:"comment-margin"},r.a.createElement("span",{className:"comment-user"},e.commentuser)," ",":",r.a.createElement("span",{className:"title-date"},r.a.createElement(N,{data:t}))),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:this._getProcessedContent(e.content)}}),r.a.createElement(C.b,null,r.a.createElement("span",null,"\u4e66\u7c4d\u7f16\u53f7:",e.commentid.bookid,",\u7ae0\u8282\u540d\u79f0:",e.commentid.chaptername)))}}]),t}(n.Component),K=a(333),z=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"data",value:function(){var e=this.props.data,t=[];if(void 0===e)return[];for(var a in e){var n;e[a]!==[]&&void 0!==e[a]&&(n={commentid:{bookid:e[a].commentid.bookid,chaptername:e[a].commentid.chaptername,datetime:e[a].commentid.datetime},commentuser:e[a].commentuser,content:e[a].content},t.push(n))}return t}},{key:"render",value:function(){return r.a.createElement(K.a,null,this.data().map(function(e,t){return r.a.createElement(U,{key:t,data:e})}))}}]),t}(n.Component),H=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(z,{data:this.props.data})}}]),t}(n.Component),$=H=y(H,"message?commentuser=".concat(localStorage.getItem("name"))),q=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"comment-margin"},"\u8fc4\u4eca\u4e3a\u6b62\u53d1\u8fc7\u7684\u8bc4\u8bba:",r.a.createElement($,null))}}]),t}(n.Component),R=q=A(q),G=(a(38),a(26)),Y=a(90),Q=a.n(Y),V=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=Object(G.a)({},this.props.data);return r.a.createElement("div",{className:"information"},r.a.createElement("span",{className:"information-title"},r.a.createElement("h1",null,e.username)),r.a.createElement(Q.a,null,r.a.createElement("label",null,"\u90ae\u7bb1\uff1a")," ",r.a.createElement("span",null,e.email),r.a.createElement("br",null),r.a.createElement("label",null,"\u81ea\u6211\u4ecb\u7ecd\uff1a")," ",r.a.createElement("span",null,e.selfintroduction),r.a.createElement("br",null),r.a.createElement("label",null,"github\uff1a")," ",r.a.createElement("span",null,e.githubpage),r.a.createElement("br",null),r.a.createElement("label",null,"homepage\uff1a")," ",r.a.createElement("span",null,e.homepage),r.a.createElement("br",null)))}}]),t}(n.Component),X=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=Object(G.a)({},this.props.data);return r.a.createElement("div",{className:"user"},r.a.createElement(W.a,{action:!0,variant:"light"},e.name))}}]),t}(n.Component),Z=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"analyseData",value:function(){var e=this.props.data;if("undefined"===typeof e)return[];var t=[],a=!0,n=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value,i={id:l.id,name:l.name};t.push(i)}}catch(s){n=!0,r=s}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t}},{key:"render",value:function(){return r.a.createElement(K.a,null,this.analyseData().map(function(e,t){return r.a.createElement(X,{data:e,key:t})}))}}]),t}(n.Component),ee=a(91),te=a.n(ee),ae=a(40),ne=a.n(ae),re=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V,{data:this.props.data.information}),r.a.createElement("div",{className:"content"},r.a.createElement(te.a,{defaultActiveKey:"write"},r.a.createElement(ne.a,{eventKey:"write",title:"\u4f5c\u54c1\u96c6"},r.a.createElement(_,{data:this.props.data.bookList_write})),r.a.createElement(ne.a,{eventKey:"love",title:"\u4e66\u5355"},r.a.createElement(_,{data:this.props.data.bookList_follow})),r.a.createElement(ne.a,{eventKey:"focus",title:"\u5173\u6ce8"},console.log(this.props.data),r.a.createElement(Z,{data:this.props.data.userList_follow})),r.a.createElement(ne.a,{eventKey:"befollowed",title:"\u88ab\u5173\u6ce8"},r.a.createElement(Z,{data:this.props.data.userList_be_followed})))))}}]),t}(n.Component),oe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(re,{param:"mypage",data:this.props.data})}}]),t}(n.Component),ce=oe=A(oe=y(oe,"mypage?userid=".concat(localStorage.getItem("userid")))),le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={name:"",password:"",userid:-1},a.handleUserInputChange=a.handleUserInputChange.bind(Object(m.a)(Object(m.a)(a))),a.handlePasswordInputChange=a.handlePasswordInputChange.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleUserInputChange",value:function(e){this.setState({name:e.target.value})}},{key:"handlePasswordInputChange",value:function(e){this.setState({password:e.target.value})}},{key:"setCookie",value:function(e,t,a){var n="";if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3),n="; expires="+r.toGMTString()}document.cookie=e+"="+t+n+"; path=/"}},{key:"setLocalStorage",value:function(){localStorage.setItem("name",this.state.name),localStorage.setItem("userid",this.state.userid)}},{key:"handleSubmit",value:function(e){var t=this;k.a.post("http://localhost:8080/user/"+e.target.value,{name:this.state.name,password:this.state.password}).then(function(e){200===e.status&&(t.setState({userid:e.data}),t.setCookie("userid",t.state.userid,7),t.setLocalStorage(),t.props.history.push("/home"))})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(b.a.Label,null,"\u8d26\u53f7"),r.a.createElement(b.a.Control,{type:"text",value:this.state.name,placeholder:"username",onChange:this.handleUserInputChange})),r.a.createElement("div",null,r.a.createElement(b.a.Label,null,"\u5bc6\u7801"),r.a.createElement(b.a.Control,{type:"password",value:this.state.password,placeholder:"password",onChange:this.handlePasswordInputChange})),r.a.createElement("div",{className:"lg"},r.a.createElement("div",{className:"login"},r.a.createElement(v.a,{variant:"outline-success",onClick:this.handleSubmit,size:"lg",value:"login"},"\u767b\u5f55")),r.a.createElement("div",{className:"register"},r.a.createElement(v.a,{variant:"outline-primary",onClick:this.handleSubmit,size:"lg",value:"register"},"\u6ce8\u518c"))))}}]),t}(n.Component),ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={userid:localStorage.getItem("userid"),username:localStorage.getItem("name"),email:localStorage.getItem("email"),githubpage:localStorage.getItem("githubpage"),homepage:localStorage.getItem("homepage"),selfintroduction:localStorage.getItem("selfintroduction"),photourl:""},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(Object(m.a)(a))),a.handleClick=a.handleClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleInputChange",value:function(e){switch(e.target.name){case"email":this.setState({email:e.target.value});break;case"homepage":this.setState({homepage:e.target.value});break;case"githubpage":this.setState({githubpage:e.target.value});break;case"selfintroduction":this.setState({selfintroduction:e.target.value})}}},{key:"handleClick",value:function(){localStorage.setItem("email",this.state.email),localStorage.setItem("githubpage",this.state.githubpage),localStorage.setItem("homepage",this.state.homepage),localStorage.setItem("selfintroduction",this.state.selfintroduction),k.a.post("http://localhost:8080/settings",this.state).then(function(e){alert(e.data)}).catch(function(e){alert(e.data)})}},{key:"handleFile",value:function(e){this.setState({file:e.target.file})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.a.Label,null,"\u8d26\u6237\u8bbe\u7f6e"),r.a.createElement("hr",null),r.a.createElement(b.a.Label,null,"\u9009\u62e9\u7167\u7247\u4f5c\u4e3a\u5934\u50cf\uff1a"),r.a.createElement(b.a.Control,{type:"file",accept:"image/png, image/jpg",onChange:this.handleFile}),r.a.createElement(b.a.Label,null,"\u90ae\u7bb1\uff1a"),r.a.createElement(b.a.Control,{type:"email",onChange:this.handleInputChange,value:this.state.email,name:"email"}),r.a.createElement(b.a.Label,null,"\u4e2a\u4eba\u4e3b\u9875\uff1a"),r.a.createElement(b.a.Control,{type:"text",onChange:this.handleInputChange,value:this.state.homepage,name:"homepage"}),r.a.createElement(b.a.Label,null,"github\u4e3b\u9875\uff1a"),r.a.createElement(b.a.Control,{type:"text",onChange:this.handleInputChange,value:this.state.githubpage,name:"githubpage"}),r.a.createElement(b.a.Label,null,"\u4e2a\u4eba\u4ecb\u7ecd\uff1a"),r.a.createElement(b.a.Control,{type:"text",onChange:this.handleInputChange,value:this.state.selfintroduction,name:"selfintroduction"}),r.a.createElement("hr",null),r.a.createElement("div",{className:"savesettings"},r.a.createElement(v.a,{variant:"primary",onClick:this.handleClick,size:"lg"},"\u4fdd\u5b58\u8bbe\u7f6e")))}}]),t}(n.Component),se=ie=A(ie),ue=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.param,t=this.props.chaptername;return r.a.createElement("div",{className:"Directory"},r.a.createElement(C.b,{to:"/read/".concat(e,"/content/").concat(t)},t))}}]),t}(n.Component),he=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getNames",value:function(){var e=this.props.directory,t=[],a=!0,n=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;t.push(l)}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sidebar_left"},r.a.createElement("span",null,"\u76ee\u5f55"),r.a.createElement(d.a,{className:"flex-column"},this.getNames().map(function(t,a){return r.a.createElement(ue,{key:a,chaptername:t,param:e.props.param})})))}}]),t}(n.Component),me=a(334),de=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={content:"",datetime:""},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"getCookie",value:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}},{key:"checkCookie",value:function(){var e=this.getCookie("userid");return!(null===e||-1===e)}},{key:"handleSubmit",value:function(e){if(this.checkCookie()){if(this.props.onSubmit){var t=this.state,a=t.content,n=t.datetime;n=(new Date).getTime(),this.props.onSubmit({content:a,datetime:n})}this.setState({content:""})}else alert("\u8bf7\u5148\u767b\u5f55\uff01")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(me.a,{className:"mb-3"},r.a.createElement(f.a,{placeholder:"\u8bc4\u8bba","aria-label":"\u8bc4\u8bba",value:this.state.content,onChange:this.handleContentChange.bind(this)}),r.a.createElement(me.a.Append,null,r.a.createElement(v.a,{variant:"outline-secondary",onClick:this.handleSubmit.bind(this)},"\u63d0\u4ea4"))))}}]),t}(n.Component),pe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"_getProcessedContent",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&$quot;").replace(/'/g,"&#039;").replace(/`([\S\s]+?)`/g,"<code></code>")}},{key:"render",value:function(){var e=this.props.data,t=e.commentid.datetime;return r.a.createElement(W.a,{action:!0,variant:"light"},r.a.createElement("div",{className:"comment-margin"},r.a.createElement("span",{className:"comment-user"},e.commentuser)," ",":",r.a.createElement("span",{className:"title-date"},r.a.createElement(N,{data:t}))),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:this._getProcessedContent(e.content)}}))}}]),t}(n.Component),be=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"data",value:function(){var e=this.props.data,t=[];if(void 0===e)return[];for(var a in e){var n;e[a]!==[]&&void 0!==e[a]&&(n={commentid:{bookid:e[a].commentid.bookid,chaptername:e[a].commentid.chaptername,datetime:e[a].commentid.datetime},commentuser:e[a].commentuser,content:e[a].content},t.push(n))}return t}},{key:"render",value:function(){return r.a.createElement(K.a,null,this.data().map(function(e,t){return r.a.createElement(pe,{key:t,data:e})}))}}]),t}(n.Component),fe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={comments:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getComments()}},{key:"componentDidUpdate",value:function(e,t,a){var n=Object(G.a)({},e),r=Object(G.a)({},this.props);n.chapterid.chaptername!==r.chapterid.chaptername&&this.getComments()}},{key:"getComments",value:function(){var e=this;k.a.post("http://localhost:8080/read/getcomments",this.props.chapterid).then(function(t){e.setState({comments:t.data})}).catch(function(t){e.setState({comments:t.data})})}},{key:"handleSubmitComment",value:function(e){if(e){if(!e.content)return alert("\u4f60\u8fd8\u6ca1\u6709\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9");var t={commentid:{bookid:this.props.chapterid.bookid,chaptername:this.props.chapterid.chaptername,datetime:e.datetime},commentuser:localStorage.getItem("name"),content:e.content};this.state.comments.push(t),this.setState({comments:this.state.comments}),k.a.post("http://localhost:8080/read/addcomment",t).then(function(e){}).catch(function(e){alert(e.data)})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(de,{onSubmit:this.handleSubmitComment.bind(this)}),r.a.createElement(be,{data:this.state.comments}))}}]),t}(n.Component),ve=a(49),ge=a.n(ve),Oe=a(92),je=a.n(Oe),Ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={content:a.props.content},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){var e={chapterid:this.props.chapterid,content:this.state.content,datetime:new Date};k.a.post("http://localhost:8080/write/updatechapter",e).then(function(e){alert(e.data)}).catch(function(e){alert(e.data)})}},{key:"render",value:function(){var e=r.a.createElement(B.a,{onClick:this.handleSubmit,action:!0,variant:"outline-success"},"\u4fdd\u5b58");return r.a.createElement("div",null,r.a.createElement("textarea",{className:"textarea",value:this.state.content,onChange:this.handleChange}),e)}}]),t}(n.Component),ke={},ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={data:"",bookid:"",chaptername:"",commentuser:"",content:"",datetime:"",contentItem:!0},a.handleEdit=a.handleEdit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){ge.a.setOptions({renderer:new ge.a.Renderer,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1,highlight:function(e){return je.a.highlightAuto(e).value}}),this.getData()}},{key:"componentDidUpdate",value:function(e,t,a){"undefined"!==typeof this.props.match&&(e.match.params.chaptername!==this.props.match.params.chaptername&&this.getData())}},{key:"getData",value:function(){var e=this;"undefined"!==typeof this.props.match&&(ke={bookid:JSON.parse(this.props.match.params.param).bookid,chaptername:this.props.match.params.chaptername},k.a.post("http://localhost:8080/read/getchapter",ke).then(function(t){e.setState({data:t.data}),e.analyse()}).catch(function(t){e.setState({data:"\u52a0\u8f7d\u9519\u8bef"})}))}},{key:"analyse",value:function(){var e=this.state.data;this.setState({bookid:e.chapterid.bookid,chaptername:e.chapterid.chaptername,author:JSON.parse(this.props.match.params.param).author,content:e.content,datetime:e.datetime}),this.setState({contentItem:r.a.createElement("div",{className:"content"},r.a.createElement("div",{id:"content",className:"article-detail",dangerouslySetInnerHTML:{__html:this.state.content?ge()(this.state.content):null}}))})}},{key:"handleEdit",value:function(){var e={bookid:JSON.parse(this.props.match.params.param).bookid,chaptername:this.props.match.params.chaptername};this.setState({contentItem:r.a.createElement(Ee,{content:this.state.content,chapterid:e})})}},{key:"render",value:function(){var e=this.state.datetime,t="";return this.state.author===localStorage.getItem("name")&&(t=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(W.a,{action:!0,variant:"warning",onClick:this.handleEdit},"\u66f4\u65b0\u7ae0\u8282")))),r.a.createElement("div",null,r.a.createElement("span",{className:"content-edit"},t),r.a.createElement("div",{className:"title"},r.a.createElement("span",null,r.a.createElement("h3",null,this.state.chaptername)),r.a.createElement("span",{className:"title-author"},this.state.author),r.a.createElement("span",{className:"title-date"},r.a.createElement(N,{data:e})),r.a.createElement("hr",null)),this.state.contentItem,r.a.createElement("div",{className:"comment"},r.a.createElement(fe,{chapterid:ke})))}}]),t}(n.Component),Ce=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return"undefined"===typeof this.props.data?r.a.createElement(O.a,{path:"/read/:param/content/:chaptername",component:ye}):r.a.createElement("div",null,"\u4e66\u672c\u7b80\u4ecb\uff1a",r.a.createElement("hr",null),this.props.data.des.description)}}]),t}(n.Component),Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={followauthor:"\u5173\u6ce8\u4f5c\u8005",followbook:"\u70b9\u8d5e\u6536\u85cf"},a.handleFollowAuthor=a.handleFollowAuthor.bind(Object(m.a)(Object(m.a)(a))),a.handleFollowBook=a.handleFollowBook.bind(Object(m.a)(Object(m.a)(a))),a.handleTop=a.handleTop.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={bookid:this.props.id,userid:localStorage.getItem("userid")};k.a.post("http://localhost:8080/read/isfollowbook",t).then(function(t){t.data?e.setState({followbook:"\u53d6\u6d88\u70b9\u8d5e"}):e.setState({followbook:"\u70b9\u8d5e\u6536\u85cf"})}).catch(function(e){alert(e.data)});var a={userid:localStorage.getItem("userid"),authorname:this.props.author};k.a.get("http://localhost:8080/read/isfollowauthor?userid=".concat(a.userid,"&authorname=").concat(a.authorname)).then(function(t){t.data?e.setState({followauthor:"\u53d6\u6d88\u5173\u6ce8"}):e.setState({followauthor:"\u5173\u6ce8\u4f5c\u8005"})}).catch(function(e){alert(e.data)})}},{key:"handleFollowBook",value:function(){var e=this;if("undefined"!==typeof this.props.id&&"undefined"!==localStorage.getItem("userid")){var t={bookid:this.props.id,userid:localStorage.getItem("userid")};"\u70b9\u8d5e\u6536\u85cf"===this.state.followbook?k.a.post("http://localhost:8080/read/addfollowbook",t).then(function(t){e.setState({followbook:"\u53d6\u6d88\u70b9\u8d5e"})}).catch(function(e){alert("\u6536\u85cf\u5931\u8d25"+e.data)}):k.a.post("http://localhost:8080/read/deletefollowbook",t).then(function(t){e.setState({followbook:"\u70b9\u8d5e\u6536\u85cf"})}).catch(function(e){alert("\u53d6\u6d88\u5931\u8d25"+e.data)})}}},{key:"handleFollowAuthor",value:function(){var e=this;if("undefined"!==typeof this.props.author&&"undefined"!==localStorage.getItem("userid")){var t={userid:localStorage.getItem("userid"),authorname:this.props.author};"\u5173\u6ce8\u4f5c\u8005"===this.state.followauthor?k.a.get("http://localhost:8080/read/addfollowauthor?userid=".concat(t.userid,"&authorname=").concat(t.authorname)).then(function(t){e.setState({followauthor:"\u53d6\u6d88\u5173\u6ce8"})}).catch(function(e){alert("\u5173\u6ce8\u5931\u8d25"+e.data)}):k.a.get("http://localhost:8080/read/deletefollowauthor?userid=".concat(t.userid,"&authorname=").concat(t.authorname)).then(function(t){e.setState({followauthor:"\u5173\u6ce8\u4f5c\u8005"})}).catch(function(e){alert("\u53d6\u6d88\u5931\u8d25"+e.data)})}}},{key:"handleTop",value:function(){document.body.scrollTop=document.documentElement.scrollTop=0}},{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar_right"},r.a.createElement(K.a,null,r.a.createElement("li",{onClick:this.handleFollowBook},r.a.createElement(K.a.Item,{action:!0,variant:"info"},this.state.followbook)),r.a.createElement("li",{onClick:this.handleFollowAuthor},r.a.createElement(K.a.Item,{action:!0,variant:"primary"},this.state.followauthor)),r.a.createElement("li",{onClick:this.handleTop},r.a.createElement(K.a.Item,{action:!0,variant:"success"},"\u5230\u9876\u90e8"))))}}]),t}(n.Component),we=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={bookid:JSON.parse(a.props.match.params.data).bookid,author:JSON.parse(a.props.match.params.data).author,directory:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;k.a.get("http://localhost:8080/read/getdirectory?bookid="+this.state.bookid).then(function(t){e.setState({directory:t.data})}).catch(function(e){})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,{className:"chapter_plus",variant:"light"},"\u589e\u52a0\u7ae0\u8282"),r.a.createElement(Se,{id:this.state.bookid,author:this.state.author}),r.a.createElement(he,{directory:this.state.directory,param:this.props.match.params.data}),r.a.createElement("div",null),r.a.createElement("div",{id:"article"},r.a.createElement(Ce,{data:this.props.location.state})))}}]),t}(n.Component),Ne="",Ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={data:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;Ne=(Ne=Object(G.a)({},this.props.match.params.id))[0],console.log(Ne),k.a.get("http://localhost:8080/mypage?userid=".concat(Ne)).then(function(t){e.setState({data:t.data})}).catch(function(t){e.setState({data:t.data})})}},{key:"render",value:function(){return r.a.createElement(re,{param:"otheruser",data:this.state.data})}}]),t}(n.Component),Le=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement("div",{className:"Content"},r.a.createElement(O.c,null,r.a.createElement(O.a,{path:"/home",exact:!0,component:T}),r.a.createElement(O.a,{path:"/write",component:P}),r.a.createElement(O.a,{path:"/message",component:R}),r.a.createElement(O.a,{path:"/mypage",component:ce}),r.a.createElement(O.a,{path:"/user/login",component:le}),r.a.createElement(O.a,{path:"/settings",component:se}),r.a.createElement(O.a,{path:"/read/:data",component:we}),r.a.createElement(O.a,{path:"/write",component:P}),r.a.createElement(O.a,{path:"/otheruser/:id",component:Ie}))))}}]),t}(n.Component),xe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g,null),r.a.createElement(Le,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C.a,null,r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,a){},38:function(e,t,a){},41:function(e,t,a){},51:function(e,t,a){},93:function(e,t,a){e.exports=a(331)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.ad59056a.chunk.js.map